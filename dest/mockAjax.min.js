/*! mockAjax 2016-02-22 */
!function(a,b){if(void 0===b)throw new Error("please use jQuery");var c=Object.prototype.toString,d=function(a){this.queue=a||[]};d.prototype={isPureObject:function(a){return!("[object Object]"!==c.call(a)||a.constructor!==Object)},getItem:function(a){a=String(a);for(var b=null,c=0,d=this.queue.length;d>c&&(b=this.queue[c],b.url!==a);c++);return b},pushQueue:function(a){var d=null,e=this;if("[object Array]"!==c.call(a)){if(!e.isPureObject(a))throw new Error("please set pure object");d=[a]}b.each(d,function(a,b){e.check(b)}),[].push.apply(this.queue,d)},check:function(a){if(void 0===a.url)throw new Error("You must set the url attribute");a.url=String(a.url),"string"==typeof a.infos&&(a.infos={success:a.infos}),a.status=a.status||"success",a.wait=a.wait||0}};var e=new d,f=function(a,b){var d=null;d="[object Boolean]"===c.call(a)?a:a>0,d?setTimeout(function(){b.call(null)},0|a):b.call(null)},g=function(a){var c=b.Deferred(),d=e.getItem(a.url||""),g=function(){a.success&&a.success.call(a.context,d.infos.success),c.resolve(d.infos.success),a.complete&&a.complete()},h=function(){a.error&&a.error.call(a.context,d.infos.error),c.reject(d.infos.error),a.complete&&a.complete()};return f(a.async,function(){switch(a.beforeSend&&a.beforeSend(),d.status){case"success":f(d.wait,function(){g()});break;case"error":f(d.wait,function(){h()});break;case"timeout":if(!a.timeout)throw new Error("not set timeout");setTimeout(function(){h()},a.timeout)}}),c.promise()};g.setMockMap=function(a){e.pushQueue(a)},g.init=function(){var a=b.ajax;b.ajax=function(b){return b.mock===!0?g(b):a(b)}},b.extend({mockAjax:g})}(window,jQuery);